<!DOCTYPE html><html lang="en"><head>
	<meta name="generator" content="Hugo 0.142.0">
    <meta charset="utf-8">
<title>PulvReAKt @ Commonwears</title>
<meta name="description" content="A gentle introduction to PulvReAKt: a pulverization framework in Kotlin">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><link rel="stylesheet" href="/prin-commonwears-2023-pulvreakt-slides/reveal-js/dist/reset.css">
<link rel="stylesheet" href="/prin-commonwears-2023-pulvreakt-slides/reveal-js/dist/reveal.css">
  <link rel="stylesheet" href="/prin-commonwears-2023-pulvreakt-slides/css/custom-theme.min.a95f0f392c0e2a9144bd1eb20d2dcdb47686bd148e6d109adb1a0e99c3dfae3c.css" id="theme"><link rel="stylesheet" href="/prin-commonwears-2023-pulvreakt-slides/highlight-js/solarized-dark.min.css">
<link rel="stylesheet" href="https://gitcdn.link/repo/DanySK/css-blur-animation/master/blur.css">
<link href="https://fonts.googleapis.com/css?family=Roboto Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Oxygen Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Ubuntu Mono" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">

  </head>
  <body>
    
    <div class="reveal">
      <div class="slides">
  

    <section><h1 id="-pulvreakt-">~ PulvReAKt ~</h1>
<h2 id="pulverization-with-reconfigurable-adaptation-in-kotlin">Pulverization with Reconfigurable Adaptation in Kotlin</h2>
<p class="avatar-container">
  <img class="avatar" src="https://avatars.githubusercontent.com/u/11615611?v=4" alt="nicolas-avatar">
</p>
Nicolas Farabegoli
</section>

  

    <section><h1 id="overview">Overview</h1>
<p>Edge-Cloud systems are <em>layered</em> and <em>heterogeneous</em>.<br>
This infrastructures provide opportunities but also challenges.</p>

<div class="multiCol "><div class="col "><p><strong>Cloud</strong>: high scalability and power but high latency in comms<br>
<strong>Fog</strong>: hierarchical architecture near the edge devices<br>
<strong>Edge</strong>: low latency in comms but limited computational power</p>
</div>
<div class="col "><figure><img src="figures/cloud-fog-edge.svg" width="90%">
</figure>
</div> </div>
<p>Several approaches have been proposed in literature to manage this complexity.</p>
</section><section>
<h1 id="pulverization-approach">Pulverization approach</h1>
<p>Pulverization breaks down the system into smaller <strong>computational units</strong> that are continuously executed across the available hosts.</p>

<div class="multiCol "><div class="col "><figure><img src="figures/pulverization-model.svg" alt="A logical device and one of its neighbours" width="86%"><figcaption>
      <p>A <b>logical device</b> and one of its neighbours</p>
    </figcaption>
</figure>
</div>
<div class="col "><figure><img src="figures/peer-to-peer.svg" alt="Example of peer-to-peer deployment." width="41%"><figcaption>
      <p>Example of <b>peer-to-peer</b> deployment.</p>
    </figcaption>
</figure>
</div>
<div class="col "><figure><img src="figures/cloud.svg" alt="Example of edge-cloud deployment." width="40%"><figcaption>
      <p>Example of <b>edge-cloud</b> deployment.</p>
    </figcaption>
</figure>
</div>
</div>
<p>This approach promotes the <strong>deployment independence</strong> of the system by separating <em>functional</em> aspects from <em>deployment</em> aspects.</p>
</section><section>


<section data-shortcode-section="">
<h1 id="pulvreakt">PulvReAKt</h1>
<div class="multiCol "><div class="col "><p>Main features:</p>
<ul>
<li><strong>Simple API</strong>: easy to use</li>
<li><strong>Extensibility</strong>: custom user-defined components</li>
<li><strong>Flexible</strong>: use different deployments strategies</li>
<li><strong>Multi-platform</strong>: multiple architectures</li>
</ul>
</div>
<div class="col "><figure><img src="figures/pulvreakt-logo.jpg" width="50%">
</figure>
</div>
</div>
<p>The framework is written in <em>Kotlin Multiplatform</em> supporting:<br>
JVM, Android, JS, iOS, Linux, macOS, and Windows.</p>
</section><section>
<h2 id="architecture">Architecture</h2>
<figure><img src="figures/pulverization-framework-overview.svg">
</figure>
<!-- ---

## PulvReAKt DSLs

#### System DSL

```kotlin
object EmbeddedDevice : Capability
object HighCpu : Capability

val systemConfig = pulverizationSystem {
    device("wearable") {
        Behaviour and Communication deployableOn setOf(EmbeddedDevice, HighCpu)
        Sensors and Actuators deployableOn setOf(EmbeddedDevice)
    }
    device("other-device") {
        Behaviour and Communication deployableOn HighCpu
    }
}
```

#### Deployment DSL

```kotlin
object Smartphone : Host {
    override val hostname = "android"
    override val capabilities = setOf(EmbeddedDevice)
}

object Server : Host {
    override val hostname = "alice"
    override val capabilities = setOf(HighCpu)
}

val infrastructure = setOf(Smartphone, Server)

val runtimeConfig = pulverizationRuntime(systemConfig, "wearable", infrastructure) {
    WearableBehaviour() startsOn Server
    WearableComm() startsOn Server
    WearableSensors() startsOn Smartphone
    WearableActuators() startsOn Smartphone
}
```

---

## Reconfiguration

```kotlin
expect fun getBatteryStatus(): Flow<Double>

object OnLowBattery : ReconfigurationEvent<Double> {
    override val events = getBatteryStatus()
    override val predicate = { it < 20.0 }
}

val runtimeConfig = pulverizationRuntime(systemConfig, "wearable", infrastructure) {
    WearableBehaviour() startsOn Smartphone
    WearableComm() startsOn Smartphone
    WearableSensors() startsOn Smartphone
    WearableActuators() startsOn Smartphone

    reconfigurationRules {
        onDevice {
            OnLowBattery reconfigures { Behaviour movesTo Server }
        }
    }
}
```

--- -->
</section><section>
<h2 id="components-communication">Components communication</h2>
<figure><img src="figures/componentref-communicator.svg">
</figure>
<div class="multiCol "><div class="col "><p><strong>ComponentRef</strong><br>
The <strong>reference</strong> to a component abstracting from its physical place.</p>
<p>Some <em>communication optimizations</em> can be performed by the framework.</p>
</div>
<div class="col "><p><strong>Communicator</strong><br>
Represents the <strong>communication</strong> between components abstracting from the specific protocol.</p>
<p>In-Memory, RabbitMQ and MQTT communicators</p>
</div> </div>

</section>
</section><section>


<section data-shortcode-section="">
<h1 id="pulvreakt-in-action">PulvReAKt in action</h1>
</section><section>
<h2 id="hot-warm-cold-game">Hot-warm-cold Game</h2>
<p>One person looks around and chooses an <strong>object</strong> to be the mystery object, then gives the other players suggestions to find the object.</p>
<p>The game is realized in a modern version using a <strong>smartphone</strong> device.<br>
The smartphone is used to <strong>sense</strong> the signal strength of the <strong>object</strong> via Bluetooth.<br>
On the smartphone UI, the user can see the <strong>distance</strong> from the object and the distance of the teammates.</p>
<p>The <em>goal</em> is to find the object.</p>
</section><section>
<h2 id="system-definition">System definition</h2>
<p>We define the structure of each device that took part into the system, by providing the system’s capability.</p>
<p>The interface <code>Capability</code> represent the capability that a component requires to be executed.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">object</span> <span style="color:#000">EmbeddedDevice</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Capability</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">object</span> <span style="color:#000">HighCpu</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Capability</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">systemConfig</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">pulverizationSystem</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">device</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">"wearable"</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">Behaviour</span> <span style="color:#000">and</span> <span style="color:#000">Communication</span> <span style="color:#000">deployableOn</span> <span style="color:#000">setOf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">EmbeddedDevice</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">HighCpu</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">Sensors</span> <span style="color:#000">and</span> <span style="color:#000">Actuators</span> <span style="color:#000">deployableOn</span> <span style="color:#000">setOf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">EmbeddedDevice</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>In this configuration the <code>Behaviour</code> and <code>Communication</code> components can be deployed either on an <em>embedded device</em> and a <em>server</em>.</p>
<p><code>Sensors</code> and <code>Actuators</code> can be deployed only on an <em>embedded device</em>.</p>
</section><section>
<h2 id="behaviour-implementation">Behaviour implementation</h2>
<p>The <code>Behaviour</code> component represents the logic of the device.</p>
<p>It can be seen as a function with a dependency to the other four components.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">WearableBehaviour</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Behaviour</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">Unit</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">DistanceFromSource</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">SignalStrengthValue</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">WearableDisplayInfo</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">Unit</span><span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">context</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Context</span> <span style="color:#204a87;font-weight:bold">by</span> <span style="color:#000">inject</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">filter</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">Filter</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">Int</span><span style="color:#000;font-weight:bold">&gt;(</span><span style="color:#000">WINDOW</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">fun</span> <span style="color:#000">invoke</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">state</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Unit</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">export</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">List</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">DistanceFromSource</span><span style="color:#000;font-weight:bold">&gt;,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">sensedValues</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">SignalStrengthValue</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">):</span> <span style="color:#000">BehaviourOutput</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">Unit</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">DistanceFromSource</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">WearableDisplayInfo</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">Unit</span><span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">filter</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">register</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">sensedValues</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">rssi</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">filteredRssi</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">filter</span><span style="color:#000;font-weight:bold">.</span><span style="color:#204a87;font-weight:bold">get</span><span style="color:#000;font-weight:bold">().</span><span style="color:#000">toInt</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">distance</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">10.0</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">pow</span><span style="color:#000;font-weight:bold">((</span><span style="color:#000">RSSI_ONE_METER</span> <span style="color:#000;font-weight:bold">-</span> <span style="color:#000">filteredRssi</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">/</span> <span style="color:#000">SIGNAL_PATH_LOSS</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">neighbourDistance</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">export</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">associate</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#204a87;font-weight:bold">it</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">deviceId</span> <span style="color:#000">to</span> <span style="color:#204a87;font-weight:bold">it</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">distance</span> <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">displayInfo</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">WearableDisplayInfo</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">neighbourDistance</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">distance</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">BehaviourOutput</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Unit</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">DistanceFromSource</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">deviceID</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">distance</span><span style="color:#000;font-weight:bold">),</span> <span style="color:#000">displayInfo</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">Unit</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div></section><section>
<h2 id="communication-implementation">Communication implementation</h2>
<p>The <code>Communication</code> component is used to communicate with other instances of logical devices in the system.</p>
<p><code>send()</code> and <code>receive()</code> are the only methods to be implemented for this component.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Serializable</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">data</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">DistanceFromSource</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">deviceId</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">String</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">distance</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Double</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">WearableComm</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Communication</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">DistanceFromSource</span><span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">context</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Context</span> <span style="color:#204a87;font-weight:bold">by</span> <span style="color:#000">inject</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">mqttClient</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">MqttClient</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">..</span><span style="color:#000;font-weight:bold">.)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">commTopic</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">"communication"</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">defaultQoS</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">fun</span> <span style="color:#000">receive</span><span style="color:#000;font-weight:bold">():</span> <span style="color:#000">Flow</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">DistanceFromSource</span><span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">callbackFlow</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">DistanceFromSource</span><span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">callback</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">object</span> <span style="color:#a40000">: </span><span style="color:#000">MqttCallback</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#ce5c00;font-weight:bold">..</span><span style="color:#000;font-weight:bold">.</span> <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">mqttCliet</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">setCallback</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">callback</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}.</span><span style="color:#000">filterNot</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#204a87;font-weight:bold">it</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">deviceId</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#000">context</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">deviceID</span> <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">suspend</span> <span style="color:#204a87;font-weight:bold">fun</span> <span style="color:#000">send</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">payload</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">DistanceFromSource</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">mqttClient</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">publish</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">commTopic</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">Json</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">encodeToString</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">payload</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">encodeToByteArray</span><span style="color:#000;font-weight:bold">(),</span> <span style="color:#000">defaultQoS</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>The implementation of this component is “application-dependent” based on the communication strategy to adopt.</p>
</section><section>
<h2 id="sensors-implementation">Sensors implementation</h2>
<p>The definition of sensors requires two concepts: <code>Sensor</code> and <code>SensorsContainer</code>.</p>
<p>The former represents the the actual sensor; the latter aggregate all the sensors belonging to the device.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@Serializable</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">data</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">SignalStrengthValue</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">rssi</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Int</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">WearableSensor</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">context</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">AndroidContext</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Sensor</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">SignalStrengthValue</span><span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">rssi</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">suspend</span> <span style="color:#000">initialize</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8f5902;font-style:italic">// Setup Android BT
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>        <span style="color:#8f5902;font-style:italic">// Update the variable `rssi` via callback 
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">suspend</span> <span style="color:#204a87;font-weight:bold">fun</span> <span style="color:#000">sense</span><span style="color:#000;font-weight:bold">():</span> <span style="color:#000">SignalStrengthValue</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">SignalStrengthValue</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">rssi</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">WearableSensorsContainer</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">aContext</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">AndroidContext</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#000">SensorsContainer</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">context</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Context</span> <span style="color:#204a87;font-weight:bold">by</span> <span style="color:#000">inject</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">suspend</span> <span style="color:#204a87;font-weight:bold">fun</span> <span style="color:#000">initialize</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">this</span> <span style="color:#ce5c00;font-weight:bold">+=</span> <span style="color:#000">WearableSensor</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">aContext</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">apply</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#000">initialize</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div></section><section>
<h2 id="actuators-implementation">Actuators implementation</h2>
<p>Similarly, for the actuators we have <code>Actuator</code> and <code>ActuatorsContainer</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">WearableActuator</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">display</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">DisplayViewModel</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Actuator</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">WearableDisplayInfo</span><span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">suspend</span> <span style="color:#204a87;font-weight:bold">fun</span> <span style="color:#000">actuate</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">payload</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">WearableDisplayInfo</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">Log</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">"WearableActuator"</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">"Actuate: </span><span style="color:#4e9a06">$payload</span><span style="color:#4e9a06">"</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">display</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">update</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">payload</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">WearableActuatorsContainer</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">private</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">display</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">DisplayViewModel</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#000">ActuatorsContainer</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">context</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Context</span> <span style="color:#204a87;font-weight:bold">by</span> <span style="color:#000">inject</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">suspend</span> <span style="color:#204a87;font-weight:bold">fun</span> <span style="color:#000">initialize</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">this</span> <span style="color:#ce5c00;font-weight:bold">+=</span> <span style="color:#000">WearableActuator</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">display</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div></section><section>
<h2 id="infrastructure-definition">Infrastructure definition</h2>
<p>We define the available hosts in the system, by providing the system’s capability.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">object</span> <span style="color:#000">Smartphone</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Host</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">hostname</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">"android"</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">capabilities</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">setOf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">EmbeddedDevice</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">object</span> <span style="color:#000">Laptop</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Host</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">hostname</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">"laptop"</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">capabilities</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">setOf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">HighCpu</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div></section><section>
<h2 id="runtime-definition">Runtime definition</h2>
<p>We define a <code>ReconfigurationEvent</code> to reconfigure the system when the battery falls below 20%.</p>
<p>Then, we register all the implemented components and their startup hosts</p>
<p>Finally, we specify the new configuration associated to the reconfiguration event.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">LowBatteryEvent</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#000">ReconfigurationEvent</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">Double</span><span style="color:#000;font-weight:bold">&gt;(),</span> <span style="color:#000">Initializable</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">events</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Flow</span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">Double</span><span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">generateSequence</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">FULL</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#204a87;font-weight:bold">it</span> <span style="color:#000;font-weight:bold">-</span> <span style="color:#000">DISCHARGE</span> <span style="color:#000;font-weight:bold">}.</span><span style="color:#000">asFlow</span><span style="color:#000;font-weight:bold">().</span><span style="color:#000">onEach</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#000">delay</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">DELAY</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">predicate</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">Double</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#000">Boolean</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#204a87;font-weight:bold">it</span> <span style="color:#000;font-weight:bold">&lt;</span> <span style="color:#000">THRESHOLD</span> <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">lowBatteryEvent</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">LowBatteryEvent</span><span style="color:#000;font-weight:bold">().</span><span style="color:#000">apply</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#000">initialize</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">runtimeConfig</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">pulverizationRuntime</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">"wearable"</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">infrastructure</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">WearableBehaviour</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000">withLogic</span> <span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">wearableBehaviourLogic</span> <span style="color:#000">startsOn</span> <span style="color:#000">Smartphone</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">WearableComm</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000">withLogic</span> <span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">wearableCommLogic</span> <span style="color:#000">startsOn</span> <span style="color:#000">Smartphone</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">WearableSensorsContainer</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000">withLogic</span> <span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">wearableSensorsLogic</span> <span style="color:#000">startsOn</span> <span style="color:#000">Smartphone</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">WearableActuatorsContainer</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">display</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000">withLogic</span> <span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">wearableActuatorsLogic</span> <span style="color:#000">startsOn</span> <span style="color:#000">Smartphone</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">reconfigurationRules</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">onDevice</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">lowBatteryEvent</span> <span style="color:#000">reconfigures</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#000">Behaviour</span> <span style="color:#000">movesTo</span> <span style="color:#000">Laptop</span> <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">withCommunicator</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#000">MqttCommunicator</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">hostname</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">"192.168.8.1"</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">port</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">1883</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">withReconfigurator</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#000">MqttReconfigurator</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">hostname</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">"192.168.8.1"</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">port</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">1883</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">withRemotePlaceProvider</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#000">defaultMqttRemotePlace</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div></section><section>
<h2 id="deployment">Deployment</h2>
<p>After the generation of the runtime configuration, it will be used by the runtime to execute the <em>deployment unit</em>.</p>
<h4 id="android-deployment-unit">Android deployment unit</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">fun</span> <span style="color:#000">onCreate</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">savedInstanceState</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">Bundle</span><span style="color:#000;font-weight:bold">?)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">super</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">onCreate</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">savedInstanceState</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">// Other initializations
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">platform</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">PulverizationRuntime</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">deviceId</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">"android"</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">runtimeConfig</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">platform</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">start</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h4 id="laptop-deployment-unit">Laptop deployment unit</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">suspend</span> <span style="color:#204a87;font-weight:bold">fun</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">// Other initializations
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">val</span> <span style="color:#000">platform</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">PulverizationRuntime</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">deviceId</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">"laptop"</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">runtimeConfig</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">platform</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">start</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div>
</section>
</section><section>
<h1 id="demo">Demo</h1>
<!-- <i class="fa-solid fa-download"></i> --- Download the demo Android app [http://bitly.ws/JxV7](http://bitly.ws/JxV7)  

<i class="fa-solid fa-wifi"></i> --- Connect to _Find-Me_ (password: `findmepulvreakt`)  

<i class="fa-solid fa-magnifying-glass"></i> --- Let's start to find the object in the room using the app! -->
<!-- 

<span class='fragment ' >
  <p>⚠️ DISCLAIMER ⚠️</p>
<p>To find the object is used the RSSI value of the Bluetooth signal and the distance could be inaccurate.</p>

</span>
 -->
</section><section>
<h1 id="pulvreakt-roadmap-to-1x">PulvReAKt Roadmap to 1.x</h1>
<p>Stabilize the framework’s API<br>
Support <em>global</em> reconfiguration rules<br>
Support <em>openness</em> (new host added at runtime)<br>
Other newtwork protocols (ZeroMQ, socket, …)<br>
Improve error handling and <em>failure recovery</em></p>
</section><section>
<h1 id="references">References</h1>

<div class="ref-entry "><i class="fa-solid fa-tv"></i><p><a href="https://nicolasfarabegoli.it/prin-commonwears-2023-pulvreakt-slides"><code>nicolasfarabegoli.it/prin-commonwears-2023-pulvreakt-slides</code></a></p>
</div>

<div class="ref-entry "><i class="fa-brands fa-github"></i><p><a href="https://github.com/pulvreakt/pulvreakt"><code>pulvreakt/pulvreakt</code></a></p>
</div>

<div class="ref-entry "><i class="fa-brands fa-github"></i><p><a href="https://github.com/nicolasfara/prin-commonwears-2023-pulvreakt"><code>nicolasfara/prin-commonwears-2023-pulvreakt</code></a></p>
</div>

<div class="ref-entry "><i class="fa-solid fa-book"></i><p><a href="https://pulvreakt.github.io/pulvreakt/"><code>pulvreakt.github.io/pulvreakt</code></a>  — 🚧</p>
</div>
</section>

</div>
      

    </div>
<script type="text/javascript" src="/prin-commonwears-2023-pulvreakt-slides/reveal-hugo/object-assign.js"></script>

<a href="/prin-commonwears-2023-pulvreakt-slides/reveal-js/dist/print/" id="print-location" style="display: none;"></a>

<script type="application/json" id="reveal-hugo-site-params">{"custom_theme":"custom-theme.scss","custom_theme_compile":true,"custom_theme_options":{"enablesourcemap":true,"targetpath":"css/custom-theme.css"},"height":"900","highlight_theme":"solarized-dark","history":true,"mermaid":[{}],"slide_number":true,"theme":"league","transition":"slide","transition_speed":"fast","width":"1440"}</script>
<script type="application/json" id="reveal-hugo-page-params">null</script>

<script src="/prin-commonwears-2023-pulvreakt-slides/reveal-js/dist/reveal.js"></script>


  
  
  <script type="text/javascript" src="/prin-commonwears-2023-pulvreakt-slides/reveal-js/plugin/markdown/markdown.js"></script>
  
  <script type="text/javascript" src="/prin-commonwears-2023-pulvreakt-slides/reveal-js/plugin/highlight/highlight.js"></script>
  
  <script type="text/javascript" src="/prin-commonwears-2023-pulvreakt-slides/reveal-js/plugin/zoom/zoom.js"></script>
  
  <script type="text/javascript" src="/prin-commonwears-2023-pulvreakt-slides/reveal-js/plugin/notes/notes.js"></script>
  
  
  <script type="text/javascript" src="/prin-commonwears-2023-pulvreakt-slides/reveal-js/plugin/notes/notes.js"></script>




<script type="text/javascript">
  
  
  function camelize(map) {
    if (map) {
      Object.keys(map).forEach(function(k) {
        newK = k.replace(/(\_\w)/g, function(m) { return m[1].toUpperCase() });
        if (newK != k) {
          map[newK] = map[k];
          delete map[k];
        }
      });
    }
    return map;
  }

  var revealHugoDefaults = { center: true, controls: true, history: true, progress: true, transition: "slide" };

  var revealHugoPlugins = {
    plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
   };
  var revealHugoSiteParams = JSON.parse(document.getElementById('reveal-hugo-site-params').innerHTML);
  var revealHugoPageParams = JSON.parse(document.getElementById('reveal-hugo-page-params').innerHTML);
  
  var options = Object.assign({},
    camelize(revealHugoDefaults),
    camelize(revealHugoSiteParams),
    camelize(revealHugoPageParams),
    camelize(revealHugoPlugins));
  Reveal.initialize(options);
</script>







  
  

  
  

  
  

  
  

  
  





    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
</script>

<script type="text/javascript" id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<script>
  if (/.*?(\?|&)print-pdf/.test(window.location.toString())) {
      var ytVideos = document.getElementsByTagName("iframe")
      for (let i = 0; i < ytVideos.length; i++) {
          var videoFrame = ytVideos[i]
          var isYouTube = /^https?:\/\/(www.)youtube\.com\/.*/.test(videoFrame.src)
          if (isYouTube) {
              console.log(`Removing ${videoFrame.src}`)
              var parent = videoFrame.parentElement
              videoFrame.remove()
              var p = document.createElement('p')
              p.append(
                  document.createTextNode(
                      "There was an embedded video here, but it is disabled in the printed version of the slides."
                  )
              )
              p.append(document.createElement('br'))
              p.append(
                  document.createTextNode(
                      `Visit instead ${
                          videoFrame.src
                      } or ${
                          videoFrame.src.replace(
                              /(^https?:\/\/(www.)youtube\.com)\/(embed\/)(\w+).*/,
                              "https://www.youtube.com/watch?v=$4"
                          )
                      }`
                  )
              )
              parent.appendChild(p)
          }
      }
  }
</script>


    
  

</body></html>